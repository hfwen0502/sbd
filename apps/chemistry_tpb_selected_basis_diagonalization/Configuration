# Path to the SBD library
SBD_PATH=../..

# mpi c++ compiler
CCCOM=mpicxx
# CCCOM=/opt/nvidia/hpc_sdk/Linux_x86_64/2025/comm_libs/mpi/bin/mpic++

# flags for build: include path to openmp. The following is the case using homebrew's llvm on Mac
#CCFLAGS= -std=c++17 -stdlib=libc++ -fopenmp -I/opt/homebrew/opt/llvm/include -O3


# accelerate using Thrust
#CCFLAGS= -mp -cuda -fast -Minfo=accel --diag_suppress declared_but_not_referenced,set_but_not_used -fmax-errors=0 -I/opt/nvidia/hpc_sdk/Linux_x86_64/2025/cuda/include/cccl -I/usr/local/cuda/include -DSBD_THRUST
CCFLAGS = -mp -cuda -gpu=sm_90 -fast --diag_suppress declared_but_not_referenced,set_but_not_used -fmax-errors=0 -DSBD_THRUST -DSBD_TRADMODE
#-DSBD_PREFECT
#-DSBD_DEBUG_MULT
#-DSBD_THRUST_NO_COLLAPSE

# Specify -gpu=mem:unified option on Grace Hopper environment (?)
# std::vector between diag and mult will be lost without this option (???)
# CCFLAGS= -cuda -Minfo=accel -gpu=mem:unified --diag_suppress declared_but_not_referenced,set_but_not_used -fmax-errors=0 -I/opt/nvidia/hpc_sdk/Linux_x86_64/2025/cuda/include/cccl -I/usr/local/cuda/include -DSBD_THRUST

# CPU run
#CCFLAGS= -mp --diag_suppress declared_but_not_referenced,set_but_not_used -fmax-errors=0 -I/opt/nvidia/hpc_sdk/Linux_x86_64/2025/cuda/include/cccl -I/usr/local/cuda/include -DSBD_DEBUG_MULT


# flags for linking: include link to lapack and blas. The following s the case using homebrew's openblas on Mac
#SYSLIB= -L/opt/homebrew/opt/openblas/lib -llapack -lblas
SYSLIB = -L/opt/ohpc/pub/libs/gnu14/openblas/0.3.29/lib -lopenblas
# SYSLIB= -llapack -lblas

### Example for the Fugaku
# SBD_PATH=../../
# CCCOM=mpiFCCpx
# CCFLAGS= -Nclang -std=c++17 -stdlib=libc++ -Kfast,openmp -Xpreprocessor -fopenmp
# SYSLIB= -SSL2
#
### Trad-mode for Fugaku
# SBD_PATH=../../
# CCCOM=mpiFCCpx
# CCFLAGS= -std=c++17 -Kfast,openmp -DSBD_TRADMODE
# SYSLIB= -SSL2
